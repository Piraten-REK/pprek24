{"version":3,"file":"app.js","sources":["../ts/lib/styles.ts","../ts/lib/aria.ts","../ts/lib/utils.ts","../ts/inc/SiteNav.ts","../ts/app.ts"],"sourcesContent":["/**\n * Calculates inner width (width without border and padding) of an element.\n * @param element Element to get inner width for\n * @returns Inner width in px\n */\nexport function innerWidth (element: AnyElement): number {\n  const outerWidth = element.clientWidth\n  const styles = getComputedStyle(element)\n\n  const borderInline = [styles.borderInlineStartWidth, styles.borderInlineEndWidth]\n    .reduce((prev, cur) => prev + parseFloat(cur), 0)\n  const paddingInline = [styles.paddingInlineStart, styles.paddingInlineEnd]\n    .reduce((prev, cur) => prev + parseFloat(cur), 0)\n\n  return outerWidth - borderInline - paddingInline\n}\n\n/**\n * Calculates px value from em value\n * @param elem Element to base em on\n * @param value Value in rem\n * @return Value in px\n */\nexport function em (element: AnyElement, value: number): number {\n  const em1 = parseFloat(getComputedStyle(element).fontSize)\n\n  return value * em1\n}\n\n/**\n * Calculates px value from rem value\n * @param value Value in rem\n * @return Value in px\n */\nexport function rem (value: number): number {\n  return em(document.documentElement, value)\n}\n","export type BoolString = 'true' | 'false'\n\ntype AnyElement = HTMLElement | SVGElement\n\ndeclare global {\n  interface Boolean {\n    toString: () => BoolString\n  }\n}\n\nexport enum AriaAttributes {\n  ARIA_CONTROLS = 'aria-controls',\n  ARIA_EXPANDED = 'aria-expanded',\n  ARIA_HASPOPUP = 'aria-haspopup'\n}\n\nexport function toggleExpanded (element: AnyElement): boolean {\n  const current = element.getAttribute(AriaAttributes.ARIA_EXPANDED) === 'true'\n  const newValue = !current\n\n  element.setAttribute(AriaAttributes.ARIA_EXPANDED, newValue.toString())\n\n  return newValue\n}\n\nexport function getExpanded (element: AnyElement): boolean {\n  return element.getAttribute(AriaAttributes.ARIA_EXPANDED) === 'true'\n}\n\nexport function setExpanded (element: AnyElement, value: BoolString | boolean): void {\n  element.setAttribute(AriaAttributes.ARIA_EXPANDED, value.toString())\n}\n","export function use <T, R> (it: T, callback: (it: T) => R): R {\n  return callback(it)\n}\n\ntype UseIfExistsReturn<T, R, D> = T extends null | undefined ? D : R\nexport function useIfExists <T, R, D = null> (it: T, callback: (it: NonNullable<T>) => R, defaultValue: D = null as D): UseIfExistsReturn<T, R, D> {\n  if (it == null) {\n    return defaultValue as UseIfExistsReturn<T, R, D>\n  }\n\n  return callback(it) as UseIfExistsReturn<T, R, D>\n}\n\ntype UseIfReturn<P extends boolean, R, D> = P extends true ? R : D\nexport function useIf <T, R, P extends boolean, D = null> (it: T, predicate: (it: T) => P, callback: (it: T) => R, defaultValue: D = null as D): UseIfReturn<P, R, D> {\n  if (predicate(it)) {\n    return callback(it) as UseIfReturn<P, R, D>\n  }\n\n  return defaultValue as UseIfReturn<P, R, D>\n}\n","import { innerWidth, rem } from '../lib/styles'\nimport { AriaAttributes, setExpanded, toggleExpanded } from '../lib/aria'\nimport { use } from '../lib/utils'\n\ntype MutableMenuStructure = Array<\n| {\n  type: 'item'\n  element: HTMLElement\n  list: HTMLUListElement\n  toggle: HTMLButtonElement\n}\n| {\n  type: 'toggle'\n  element: HTMLButtonElement\n  list: HTMLUListElement\n  toggle: HTMLButtonElement\n  items: MenuStructure\n}\n>\n\ntype MenuStructure = readonly (\n  | {\n    type: 'item'\n    element: HTMLElement\n    list: HTMLUListElement\n    toggle: HTMLButtonElement\n  }\n  | {\n    type: 'toggle'\n    element: HTMLButtonElement\n    list: HTMLUListElement\n    toggle: HTMLButtonElement\n    items: MenuStructure\n  }\n  )[]\n\nexport default class SiteNav {\n  readonly headerPadding: number\n\n  static header = document.querySelector('body > .site-header') as HTMLAreaElement\n  static siteTitle = document.querySelector('body > .site-header > .site-title') as HTMLDivElement\n  static toggle = document.querySelector('body > .site-header > .site-nav-toggle') as HTMLButtonElement\n  static nav = document.querySelector('body > .site-header > .site-nav') as HTMLAreaElement\n  static list = document.querySelector('body > .site-header > .site-nav > ul') as HTMLUListElement\n  static structure = SiteNav.getStructure()\n\n  static navWidth = SiteNav.nav.clientWidth\n\n  #mobile = false\n  #open = false\n  #indices: number[] = []\n\n  constructor (headerPadding: number = rem(4)) {\n    this.headerPadding = headerPadding\n\n    window.addEventListener('resize', this.navWatcher())\n\n    this.addClickListeners()\n  }\n\n  get mobile (): boolean {\n    return this.#mobile\n  }\n\n  set mobile (value: boolean) {\n    if (value !== this.#mobile) {\n      this.#mobile = value\n      document.body.setAttribute('data-mobile-nav', value.toString())\n\n      for (const elem of SiteNav.firstLevelElements()) {\n        if (value) {\n          elem.setAttribute('tabindex', '-1')\n        } else {\n          elem.removeAttribute('tabindex')\n        }\n      }\n    }\n  }\n\n  get open (): boolean {\n    return this.#open\n  }\n\n  set open (value: boolean) {\n    if (value !== this.open) {\n      this.#open = value\n      setExpanded(SiteNav.toggle, value)\n    }\n  }\n\n  get closed (): boolean {\n    return !this.#open\n  }\n\n  set closed (value: boolean) {\n    if (value === this.#open) {\n      this.#open = !value\n      setExpanded(SiteNav.toggle, !value)\n    }\n  }\n\n  get indices (): number[] {\n    return [...this.#indices]\n  }\n\n  get current (): MenuStructure[number] | undefined {\n    if (this.#indices.length === 0) {\n      return undefined\n    }\n\n    let structure = SiteNav.structure\n    const idx = this.indices\n    const lastIndex = idx.pop() as number\n    while (idx.length > 0) {\n      structure = (structure[idx.shift() as number] as Extract<MenuStructure[number], { type: 'toggle' }>).items\n    }\n\n    return structure[lastIndex]\n  }\n\n  private navWatcher (): (() => void) {\n    const headerWidth = innerWidth(SiteNav.header)\n    const titleWidth = SiteNav.siteTitle.clientWidth\n    const delta = headerWidth - titleWidth - this.headerPadding\n\n    this.mobile = SiteNav.navWidth > delta\n\n    return this.navWatcher.bind(this)\n  }\n\n  private addClickListeners (structure: MenuStructure = SiteNav.structure, index: number[] = []): void {\n    for (let idx = 0, item = structure[0]; idx < structure.length; item = structure[++idx]) {\n      if (item.type === 'item') {\n        continue\n      }\n\n      item.element.addEventListener('click', () => {\n        const state = toggleExpanded(item.element)\n\n        if (state) {\n          // close currently open\n          const current = this.current\n          if (current != null) {\n            setExpanded(current.toggle, false)\n          }\n\n          // set focus to first child\n          item.items[0].element.focus()\n          // set current index\n          this.#indices = [...index, idx, 0]\n        } else {\n          // set focus to element\n          item.element.focus()\n          // set current index\n          this.#indices = [...index, idx]\n        }\n      })\n\n      this.addClickListeners(item.items, [...index, idx])\n    }\n  }\n\n  private static * firstLevelElements(list: HTMLUListElement = SiteNav.list): Generator<HTMLButtonElement | HTMLAnchorElement, void, unknown> {\n    for (const child of Array.from(list.children)) {\n      for (const grandchild of Array.from(child.children)) {\n        if (grandchild instanceof HTMLAnchorElement || grandchild instanceof HTMLButtonElement) {\n          yield grandchild\n        }\n      }\n    }\n  }\n\n  private static getStructure (list: HTMLUListElement = SiteNav.list, toggle: HTMLButtonElement = SiteNav.toggle): MenuStructure {\n    const structure: MutableMenuStructure = []\n\n    for (const item of SiteNav.firstLevelElements(list)) {\n      const hasPopup = use(item.getAttribute(AriaAttributes.ARIA_HASPOPUP), it => it != null && it !== 'false')\n\n      if (hasPopup) {\n        const controls = item.getAttribute(AriaAttributes.ARIA_CONTROLS)\n\n        if (controls == null) {\n          throw new ReferenceError(`${AriaAttributes.ARIA_CONTROLS} unset`)\n        }\n\n        const subMenu: HTMLUListElement | null = list.querySelector(`#${controls}`)\n\n        console.log(controls, subMenu, list)\n\n        if (subMenu == null) {\n          throw new ReferenceError(`${AriaAttributes.ARIA_CONTROLS} \"${controls}\" invalid`)\n        }\n\n        structure.push({\n          type: 'toggle',\n          element: item as HTMLButtonElement,\n          list: subMenu,\n          toggle,\n          items: SiteNav.getStructure(subMenu, item as HTMLButtonElement)\n        })\n      } else {\n        structure.push({\n          type: 'item',\n          element: item,\n          list,\n          toggle\n        })\n      }\n    }\n\n    return Object.freeze(structure)\n  }\n}\n","// import handleOutsideClick from './lib/handleOutsideClick'\n// import setUpMenu from './lib/menu'\n// import { innerWidth, rem } from './lib/styles'\nimport SiteNav from './inc/SiteNav'\n\n// const HEADER_PADDING = rem(4)\n\n// const siteNavList = document.querySelector('.site-nav ul') as HTMLUListElement\n// const siteNavToggle = document.querySelector('.site-nav-toggle') as HTMLButtonElement\n// const siteNav = setUpMenu(siteNavList, siteNavToggle)\n\n// handleOutsideClick(siteNavList, event => {\n//   if (!siteNav.status) {\n//     return\n//   }\n\n//   let node = event.target as Element | null\n\n//   while (node != null && node.nodeType !== Node.DOCUMENT_NODE) {\n//     if (node === siteNavList || node === siteNavToggle) {\n//       return\n//     }\n//     node = node.parentElement ?? null\n//   }\n\n//   siteNav.close()\n// })\n\nconst siteNav = new SiteNav()\nconsole.log(siteNav)\n\n// const siteNavNav = document.querySelector('.site-nav') as HTMLAreaElement\n// const navWidth = siteNavNav.clientWidth\n\n// function siteNavWatcher (): (() => void) {\n//   const headerElement = document.querySelector('.site-header') as HTMLAreaElement\n//   const headerWidth = innerWidth(headerElement)\n//   const titleElement = document.querySelector('.site-title') as HTMLDivElement\n//   const titleWidth = titleElement.clientWidth\n//   const delta = headerWidth - titleWidth - HEADER_PADDING\n\n//   document.body.setAttribute('data-mobile-nav', (navWidth > delta).toString())\n\n//   return siteNavWatcher\n// }\n// window.addEventListener('resize', siteNavWatcher())\n"],"names":[],"mappings":"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"}